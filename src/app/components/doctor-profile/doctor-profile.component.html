<div class="mat-card-style">

    <ng-container *ngIf="editable">
        <mat-form-field style="width: 240px" class="example-full-width">
            <mat-label>Title</mat-label>
            <mat-select required [(value)]="userData.title">
                <ng-container *ngFor="let title of titles" >
                    <mat-option value="{{title.value}}">
                        {{title.value}}
                    </mat-option>
                </ng-container>
            </mat-select>
        </mat-form-field>

        <mat-form-field style="width: 240px" class="example-full-width">
            <mat-label>First Name: {{userData.firstName}}</mat-label>
            <input required matInput placeholder="" [(ngModel)]="userData.firstName">
        </mat-form-field>

        <mat-form-field style="width: 240px" class="example-full-width">
            <mat-label>Last Name: {{userData.lastName}}</mat-label>
            <input required matInput placeholder="" [(ngModel)]="userData.lastName">
        </mat-form-field>

        <mat-form-field style="width: 240px" class="example-full-width">
            <mat-label>Professional Level</mat-label>
            <mat-select required [(value)]="userData.professionalType">
                <ng-container *ngFor="let professionalType of doctorTypes" >
                    <mat-option value="{{professionalType.value}}">
                        {{professionalType.value}}
                    </mat-option>
                </ng-container>
            </mat-select>
        </mat-form-field>

        <mat-form-field  style="width: 240px" class="example-full-width">
            <mat-label>Registration Number (SLMC):</mat-label>
            <input matInput placeholder=""  [(ngModel)]="userData.regNo">
        </mat-form-field>

        <mat-form-field  style="width: 240px" class="example-full-width">
            <mat-label>Qualifications / Description:</mat-label>
            <textarea required matInput placeholder="" [(ngModel)]="userData.qualifications"></textarea>
        </mat-form-field>

        <mat-form-field *ngIf="isConsultant(userData.professionalType)" style="width: 240px" class="example-full-width">
            <mat-label>Specialization #1</mat-label>
            <mat-select matNativeControl [(value)]="userData.specialityA">
                <ng-container *ngFor="let specialization of specializations" >
                    <mat-option value="{{specialization}}">
                        {{specialization}}
                    </mat-option>
                </ng-container>
            </mat-select>
        </mat-form-field>
        <mat-form-field *ngIf="isConsultant(userData.professionalType)" style="width: 240px" class="example-full-width">
            <mat-label>Specialization #2 (Optional)</mat-label>
            <mat-select matNativeControl [(value)]="userData.specialityB">
                <ng-container *ngFor="let specialization of specializations" >
                    <mat-option value="{{specialization}}">
                        {{specialization}}
                    </mat-option>
                </ng-container>
            </mat-select>
        </mat-form-field>
        <mat-form-field *ngIf="isConsultant(userData.professionalType)" style="width: 240px" class="example-full-width">
            <mat-label>Specialization #3 (Optional)</mat-label>
            <mat-select matNativeControl [(value)]="userData.specialityC">
                <ng-container *ngFor="let specialization of specializations" >
                    <mat-option value="{{specialization}}">
                        {{specialization}}
                    </mat-option>
                </ng-container>
            </mat-select>
        </mat-form-field>

        <mat-form-field  style="width: 240px" class="example-full-width">
            <mat-label>WhatsApp Number:</mat-label>
            <input required matInput placeholder="" [(ngModel)]="userData.whatsAppNumber">
        </mat-form-field>
        <br>
        <mat-form-field  style="width: 240px" class="example-full-width">
            <mat-label>Contact Number:</mat-label>
            <input required matInput placeholder="" [(ngModel)]="userData.contactNumber">
        </mat-form-field>
        <br>
        <mat-form-field  style="width: 240px" class="example-full-width">
            <mat-label>Price per consultation ({{priceCurrency}}):</mat-label>
            <input required matInput placeholder="" [(ngModel)]="userData.priceForAppointment">
        </mat-form-field>
        <br>
        <mat-label style="font-size: small">Upload Profile Picture:</mat-label>
        <br>
        <input #imageInput
               type="file"
               accept="image/*"
               (change)="uploadImage(imageInput)">
        <br>
        <br>
        <button style="width: 240px" mat-raised-button color="primary" (click)="saveData()">Save</button>
        <br>
        <br>
        <button style="width: 240px" mat-raised-button color="secondary" (click)="toggleEditable(false)">Back</button>
        <br>
    </ng-container>

    <ng-container *ngIf="!editable">
        <app-page-title [title]="'My Profile'"></app-page-title>

        <ng-container *ngIf="userData?.availableForAppointment">
            <ngb-alert [type]="'success'" [dismissible]="false">
                Profile Status: <b>Active</b>
            </ngb-alert>
        </ng-container>

        <ng-container *ngIf="!userData?.availableForAppointment">
            <ngb-alert [type]="'danger'" [dismissible]="false">
                Profile Status: <b>Not Active</b>
            </ngb-alert>
        </ng-container>

        <ng-container *ngIf="!userData?.availableForAppointment">
            <ngb-alert [dismissible]="false">
                <strong>Note:</strong> You have not completed your Profile and Schedule yet. You will not be listed under searches until you complete your Schedule and Profile.
            </ngb-alert>
        </ng-container>

        <button [disabled]="!userData?.availableForAppointment" (click)="goToMyAppointments()" style="width: 320px" mat-raised-button color="primary">My Bookings</button>
        <br>
        <br>
        <button [disabled]="!userData?.availableForAppointment && checkForMandatoryFieldsToActivateProfile(userData)" [color]="userData?.availableForAppointment? null: 'warn'" style="width: 320px" mat-raised-button (click)="toggleEditable(true)">Edit Profile</button>
        <br>
        <br>
        <button [disabled]="!userData?.availableForAppointment && !checkForMandatoryFieldsToActivateProfile(userData)" [color]="userData?.availableForAppointment? null:'warn'" (click)="editSchedule()" style="width: 320px" mat-raised-button>Edit Schedule</button>
        <br>
        <br>
        <button disabled style="width: 320px" mat-stroked-button>My Finances</button>
        <br>
        <br>
        <button style="width: 320px" mat-flat-button color="warn" (click)="dataHandlerService.logOut()">Log Out</button>
        <br>
        <br>
        <br>
        <ng-container  *ngIf="userData?.availableForAppointment">
            <p>What the patients see:</p>
            <app-professional-card
            [professional]="userData"
            ></app-professional-card>
        </ng-container>
    </ng-container>
</div>
