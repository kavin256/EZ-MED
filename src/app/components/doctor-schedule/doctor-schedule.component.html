<div class="mat-card-style">
    <mat-form-field style="width: 240px"  appearance="legacy">
        <mat-label>Average Time For Consultation (minutes):</mat-label>
        <input required matInput #input7 [(ngModel)]='doctorScheduleData.averageTimeForAppointment'>
    </mat-form-field>
    <br>
    <br>

    <p>Weekly Schedule for consultations:</p>
    <mat-accordion>
        <div *ngFor="let schedule of doctorScheduleData.fixedDoctorDates;">
            <mat-expansion-panel style="width: 320px">
                <mat-expansion-panel-header>
                    <mat-panel-title style="font-family: 'Arial Black'"><b>{{schedule.title}}</b></mat-panel-title>
                </mat-expansion-panel-header>
                <mat-divider></mat-divider>
                <br>
                <ng-container *ngFor="let workingTimePeriod of schedule.workingTimePeriods; let i = index">
                    <p align="left"><b>
                        <mat-checkbox
                                (change)="workingTimePeriod.isActive = !workingTimePeriod.isActive"
                                [checked]="workingTimePeriod && workingTimePeriod.isActive"><span style="font-family: 'Arial Black'">{{schedule.title}} Slot #{{i+1}}</span>
                        </mat-checkbox>
                    </b></p>
                    <ng-container *ngIf="workingTimePeriod.isActive">
                        <mat-label>From:</mat-label>
                        <ngb-timepicker [(ngModel)]="workingTimePeriod.startTimeSelected" [meridian]="meridian"></ngb-timepicker>
                        <mat-label>To:</mat-label>
                        <ngb-timepicker [(ngModel)]="workingTimePeriod.endTimeSelected" [meridian]="meridian"></ngb-timepicker>
                        <ng-container *ngIf="schedule.workingTimePeriods.length > i+1"><mat-divider></mat-divider></ng-container>
                        <br>
                    </ng-container>
                </ng-container>
            </mat-expansion-panel>
            <br>
        </div>
    </mat-accordion>

    <br>
    <ng-container>
        <p style="font-size: small; color: crimson">
            <span><b>Note: </b></span>Once you save the changes, the new schedule will be populated after a week, because the already booked appointments will be affected.<br>
        </p>
        <ng-container *ngIf="showMoreInfo">
            <p style="font-size: small; color: crimson">
                <span><b>Note: </b></span>Once you save the changes, the new schedule will be populated after a week, because the already booked appointments will be affected.<br>
            </p>
        </ng-container>
        <button *ngIf="showMoreInfo" (click)="showMoreInfo = !showMoreInfo" mat-raised-button color="warn">More Info</button>
        <button *ngIf="showMoreInfo"  (click)="showMoreInfo = !showMoreInfo"  mat-raised-button color="warn">Hide Info</button>
    </ng-container>
    <ng-container *ngIf="changeRequestSent">
        <p style="font-size: small; color: crimson">** You can not save above details temporarily. You have made a change request already and it takes 7 days before you can send another change request.
            Contact us for more clarifications.</p>
    </ng-container>
    <button *ngIf="!isConfirmationActive" (click)="userConsent()"  [disabled]="changeRequestSent" style="width: 320px" mat-raised-button color="primary">Save</button>
    <br>
    <br>
    <button *ngIf="!isConfirmationActive" (click)="goToProfessionalDashboard()" style="width: 320px" mat-raised-button color="secondary">Back</button>
    <p *ngIf="isConfirmationActive" align="center">Are you sure?</p>
    <button *ngIf="isConfirmationActive" (click)="save(professional.userName)" style="width: 150px" mat-raised-button color="primary">Send Request</button>
    <span>&nbsp;&nbsp;<button *ngIf="isConfirmationActive" (click)="cancel()" style="width: 150px" mat-raised-button color="secondary">Cancel</button></span>
</div>
