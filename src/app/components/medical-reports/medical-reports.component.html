<div class="mat-card-style">

    <ng-container *ngIf="!addItem && !doctorSide">
        <div align="center">
            <button (click)="addMoreItem()" style="width: 320px" color="primary" mat-flat-button>Add a file</button>
        </div>
    </ng-container>
    <ng-container *ngIf="addItem">
        <div align="center">
            <button (click)="cancelAddingItem()" style="width: 320px" color="warn" mat-flat-button>Cancel</button>
        </div>
    </ng-container>
    <br>
    <ngb-alert *ngIf="addItem"  style="color: #3f51b5 ;border-color: white; background-color: #E5E6FE ;width: 320px; min-height: 60px" [dismissible]="false">
        <p>
            Add your files here. Please make sure NOT more than one file has the same file name. Max file size : 15MB
        </p>

        <input type="file"
               accept="image/*,.pdf,.doc,.docx"
               (change)="uploadImage($event)">

    </ngb-alert>
    <ngb-alert *ngIf="uploadSuccessful" style="color: #4CAF50 ;background-color: white ;width: 320px; height: 50px" [dismissible]="false">
        <h5>
            Uploaded successfully!
        </h5>
    </ngb-alert>
    <ngb-alert *ngIf="uploadingInProgress" style="color: #3f51b5 ;background-color: white ;width: 320px; height: 50px" [dismissible]="false">
        <h5>
            Uploading...
        </h5>
    </ngb-alert>
    <ngb-alert *ngIf="uploadingFailed" style="color: #fa3c22 ;background-color: white ;width: 320px; height: 50px" [dismissible]="false">
        <h5>
            Uploading failed
        </h5>
    </ngb-alert>

    <br>
    <ng-container *ngIf="!addItem">
        <ng-container *ngIf="objectListing?.objectSummaries.length; else noResults">
            <div *ngFor="let summary of objectListing?.objectSummaries; let i = index;">
                <ngb-alert style="width: 320px; min-height: 120px" (close)="removeItem(i)" [dismissible]="false">
                    <div>
                        <table align="left">
                            <tr>
                                <td>
                                    <p style="font-size: small">{{summary.keyName}}</p>
                                </td>
                            </tr>

                        </table>
                    </div>
                    <br>
                    <br>
                    <div>
                        <table align="left">
                            <tr>
                                <ng-container *ngIf="!doctorSide">
                                    <td>
                                        <button style="margin:5px;" style="width: 120px" (click)="removeItem(i)" mat-stroked-button color="warn">Remove File</button>
                                    </td>
                                    <td style="width: 5px">
                                    </td>
                                </ng-container>
                                <td>
                                    <button style="margin:5px;" style="width: 100px" (click)="download(viewFileURL, summary.keyName);" mat-stroked-button color="primary">Download</button>
                                </td>
                            </tr>
                        </table>
                    </div>
                </ngb-alert>

            </div>
        </ng-container>
        <ng-template #noResults>
            <div>
                <p style="color: crimson; text-align: center"><b>Sorry, No results found</b></p>
            </div>
        </ng-template>
    </ng-container>

    <br>

    <button style="width: 320px" (click)="goToMyAppointments()" mat-raised-button color="primary">Go back</button>

</div>
