<div class="mat-card-style">

    <app-page-title [title]="title"></app-page-title>
    <h5 *ngIf="!editable">{{patient.title}}. {{patient.firstName}} {{patient.lastName}}</h5>
    <h6 *ngIf="!editable">{{patientAge}} yrs</h6>
    <br>

    <ng-container *ngIf="editable">
        <div>
            <mat-form-field style="width: 240px" appearance="legacy">
                <mat-label>Title</mat-label>
                <mat-select required [(value)]="patient.title">
                    <ng-container *ngFor="let title of titles" >
                        <mat-option value="{{title}}">
                            {{title}}
                        </mat-option>
                    </ng-container>
                </mat-select>
            </mat-form-field>
            <br>
        </div>
        <div>
            <mat-form-field style="width: 240px" appearance="legacy">
                <mat-label>First Name</mat-label>
                <input required matInput #input1 [(ngModel)]='patient.firstName' [formControl]="firstNameFormControl">
            </mat-form-field>
            <br>
            <mat-form-field style="width: 240px" appearance="legacy">
                <mat-label>Last Name</mat-label>
                <input required matInput [(ngModel)]='patient.lastName' [formControl]="lastNameFormControl">
            </mat-form-field>
            <br>
            <mat-form-field style="width: 240px"  appearance="legacy">
                <mat-label>Email</mat-label>
                <input readonly matInput [(ngModel)]='patient.userName' [formControl]="emailFormControl">
            </mat-form-field>
            <br>
            <mat-form-field style="width: 240px"  appearance="legacy">
                <mat-label>Gender * ({{gender}})</mat-label>
                <mat-select [(value)]='gender'>
                    <mat-option required *ngFor="let gender of genders" value="{{gender}}">
                        {{gender | titlecase}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <br>
        </div>
        <div>
            <mat-form-field style="width: 240px" >
                <input matInput required [matDatepicker]="picker1" placeholder="Birthday:" [formControl]="dateFormControl">
                <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                <mat-datepicker  #picker1></mat-datepicker>
            </mat-form-field>
            <br>
        </div>
        <div>
            <mat-form-field style="width: 240px" appearance="legacy">
                <mat-label>Contact Number<br>(Could be the WhatsApp Number)</mat-label>
                <br>
                <input required matInput [(ngModel)]='patient.contactNumber' [formControl]="contactNumberFormControl">
            </mat-form-field>
        </div>
        <div>
            <mat-form-field style="width: 240px"  appearance="legacy">
                <mat-label>WhatsApp Number</mat-label>
                <input required matInput #input7 [(ngModel)]='patient.whatsAppNumber' [formControl]="whatsAppNumberFormControl">
            </mat-form-field>
        </div>
        <div>
            <mat-form-field style="width: 240px"  appearance="legacy">
                <mat-label>Known Allergies</mat-label>
                <textarea type="text" matInput #input8 [(ngModel)]='patient.userAllergies'></textarea>
            </mat-form-field>
            <br>
        </div>
        <br>
        <br>
        <button style="width: 240px" mat-raised-button color="primary" (click)="toggleEditable(false)">Save</button>
        <br>
        <br>
        <button style="width: 240px" mat-raised-button color="secondary" (click)="toggleEditable(false)">Back</button>
        <br>
    </ng-container>

    <ng-container *ngIf="!editable">
        <button style="width: 320px" (click)="goToMyAppointments()" mat-raised-button color="primary">My Bookings</button>
        <br>
        <br>
        <button style="width: 320px" mat-raised-button (click)="toggleEditable(true)">Edit Profile</button>
        <br>
        <br>
        <button style="width: 320px" mat-flat-button color="warn" (click)="dataHandlerService.logOut()">Log Out</button>
    </ng-container>
</div>
